{"id":13018,"name":"AcrisShippingCalculationCS","code":"acris76074869522","lastChange":{"date":"2023-07-18 19:11:11.000000","timezone_type":3,"timezone":"Europe/Berlin"},"support":true,"supportOnlyCommercial":false,"iconPath":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpzMfHof","examplePageUrl":"","moduleKey":"AcrisShippingCalculationCS","creationDate":{"date":"2021-02-12 10:28:57.000000","timezone_type":3,"timezone":"Europe/Berlin"},"automaticBugfixVersionCompatibility":false,"hiddenInStore":false,"releaseDate":{"date":"2021-03-19 11:43:40.000000","timezone_type":3,"timezone":"Europe/Berlin"},"plannedReleaseDate":null,"migrationSupport":false,"lastBusinessModelChangeDate":{"date":"2023-01-09 12:42:53.000000","timezone_type":3,"timezone":"Europe/Berlin"},"pluginTestingInstanceDisabled":false,"producer":{"id":469,"prefix":"acris","name":"ACRIS E-Commerce GmbH","website":"//www.acris.at","fixed":true,"iconPath":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/prod469_ACRIS_Logo_128x128px.jpg"},"infos":[{"id":22662,"name":"individuelle Versandkosten Berechnung mit TWIG Vorlagen","description":"<h2>Nutzung des Plugins</h2><p>Das Plugin fügt die Möglichkeit hinzu, den Versand manuell zu berechnen. Mithilfe von lineitems vom Warenkorb können Sie diese zur Berechnung des Versands verwenden. Das Feld \"Versandberechnung\" basiert auf der Twig-Vorlage und die Twig-Funktionen sollten in Operationen mit Daten aufgerufen werden.<br>In \"lineItems\" sind alle Produkte aus dem Warenkorb. Und dort sind aktuelle \"salesChannel\" Daten hinzugefügt.</p><p>Ermöglicht somit komplexeste Versandkostenermittlung mit relativ einfachen Mitteln (TWIG) via Shopware Admin Oberfläche.<br></p><h3><br></h3><h3>Funktionsweise <br></h3><ul><li>Es ist möglich, die Versandberechnung auf der Detailseite der Versandart manuell hinzuzufügen.</li><li>Standardwerte hinzugefügt: <br><ul><li>Vertriebskanal</li><li>LineItems (lineItem funktioniert nur bei foreach-Schleife).</li></ul></li></ul><ul><li>Wenn kein Float-Wert zurückgegeben werden kann, wird der nächste Matrixpreis (falls vorhanden) oder der Standardpreis verwendet.</li></ul><p><br></p><h3>Manuelle Berechnung der Versandkosten </h3><p>Im\n\nBereich Einstellungen -&gt; Shop-&gt; Versand -&gt; Versandart anlegen oder bearbeiten <br></p><p>Hier ist es möglich über eine Preismatrix, den Versand <b>manuell berechnen</b> zu lassen.</p><p><br></p><p>Sie haben hier lineItems vom Warenkorb und können diese zur Berechnung des Versands verwenden.<br></p><p><br></p><h3>Beispiel #1: (Versandkosten fix auf 10 ohne weiterer Regeln)<br></h3>{% set shipping = 10 %}<br><p>{{ shipping }}</p><p><br></p><h3>Beispiel #2: (Versandkosten erhöhen sich um einen Wert, abhängig davon ob ein Artikel mit dem CustomField im Warenkorb liegt)<br></h3><p>{% set shipping = 10 %}<br>{% for lineItem in lineItems %}<br>&nbsp;&nbsp;&nbsp; {% if lineItem.payload.customFields.custom_sw4_attributes_attr7 == \"1\" %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% set shipping = shipping + 1 %}<br>&nbsp;&nbsp;&nbsp; {% endif %}<br>{% endfor %}<br>{{ shipping }}</p><p><br></p><h3>Beispiel #3: (Versandkosten je nachdem in welchen Kategorien sich die Produkte Warenkorb befinden)</h3><p>{% set numberProductsInsideCategory1 = 0 %}<br>{% set numberProductsInsideCategory2 = 0 %}<br><br>{% for lineItem in lineItems %}<br>&nbsp;&nbsp;&nbsp; {% if lineItem.payload.categoryIds %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% for categoryId in lineItem.payload.categoryIds %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {# Is product inside category 1 - we check it by the UUID #}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% if categoryId == '21b199946c884aa294b409f135963880' %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% set numberProductsInsideCategory1 = numberProductsInsideCategory1 + 1 %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endif %}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {# Is product inside category 2 - we check it by the UUID? #}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% if categoryId == '0b5e8204e7034c2ca17a3899274874a4' %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% set numberProductsInsideCategory2 = numberProductsInsideCategory2 + 1 %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endif %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endfor %}<br>&nbsp;&nbsp;&nbsp; {% endif %}<br>{% endfor %}<br><br>{# Now we can do something with the variables numberProductsInsideCategory1 and numberProductsInsideCategory2 #}<br>{% if numberProductsInsideCategory1 &gt; 0 and numberProductsInsideCategory2 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 19.90<br>{% elseif numberProductsInsideCategory1 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 14.90<br>{% elseif numberProductsInsideCategory2 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 12.90<br>{% else %}<br>&nbsp;&nbsp;&nbsp; 9.90<br>{% endif %}<br></p><p><b>Hinweis:</b> Es sind im Warenkorb nur die UUIDs der Kategorien (einmalige ID in der Datenbank) verfügbar. Die UUID kannst du sehr einfach über das Plugin <a href=\"https://store.shopware.com/acris28622190382f/acris-kategorie-id-anzeigen.html\" target=\"_blank\" rel=\"noreferrer noopener\">https://store.shopware.com/acris28622190382f/acris-kategorie-id-anzeigen.html</a> auslesen und kopieren.</p><h3><br></h3><h3>Beispiel #4: Mengen Ermittlung</h3>\n\n{% set quantity = 0 %}<br>\n{% for lineItem in lineItems %}<br>\n&nbsp;&nbsp;&nbsp; {% if lineItem.quantity %}<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n{% set quantity = quantity + lineItem.quantity %}<br>&nbsp;&nbsp;&nbsp; \n{% endif %}<br>\n{% endfor %}<br><p>\n{{ quantity }} <br></p><p><br></p><h3>Beispiel #5: Kunden Freitextfeld Freihausgrenze</h3><p>{% set customerShippingFreeLimit = false %}<br>{% if customer.customFields is not empty and customer.customFields.custom_customer_shipping_free_limit &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; {% set customerShippingFreeLimit = customer.customFields.custom_customer_shipping_free_limit %}<br>{% endif %}<br><br>{% set shippingCosts = 9.95 %}<br>{% if customerShippingFreeLimit &gt; 0 and cart.price.totalPrice &gt;= customerShippingFreeLimit&nbsp; %}<br>&nbsp;&nbsp;&nbsp; {% set shippingCosts = 0 %}<br>{% endif %}<br><br>{{ shippingCosts }}</p><p><br></p><h3>Beispiel #6: Hinzufügen der Mehrwertsteuer je nach Lieferland und Warenkorbinhalt zum Nettopreis der Versandkosten<br></h3><p></p><p>{% set shippingNet = 100 %}<br><br>{% if context.taxState == 'gross' and matchingTaxRules and matchingTaxRules.highestRate() %}<br>&nbsp;&nbsp;&nbsp; {% set shippingNet = shippingNet / 100 * matchingTaxRules.highestRate().getPercentage() %}<br>&nbsp;&nbsp;&nbsp; {% set shipping = shippingNet * (1 + (matchingTaxRules.highestRate().getTaxRate() / 100)) %}<br>{% else %}<br>&nbsp;&nbsp;&nbsp; {% set shipping = shippingNet %}<br>{% endif %}<br><br>{{ shipping }}<br></p><p><br></p><p>---<br></p><p><br></p><p>Folgende Variablen sind aktuell verfügbar - wenn sie weiter Variablen benötigen, dann bitte eine Supportanfrage über den Shopware Account an uns stellen.\n\n\n\n\n\n</p><br><h2>Auflistung der möglichen Variablen</h2><h3>matchingTaxRules<i> (Steuern, die für die Versandart relevant sind, ermittelt über Steuer-Typ - PHP-Klasse <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php\" target=\"_blank\" rel=\"noreferrer\">TaxRuleCollection</a>)</i></h3><ul><li>matchingTaxRules.highestRate().getTaxRate()</li></ul><h2>currency </h2><ul><li>currency.isoCode</li><li>currency.factor</li><li>currency.symbol</li><li>currency.shortName</li><li>currency.name</li><li>currency.position</li><li>currency.translations</li><li>currency.orders</li><li>currency.salesChannels</li><li>currency.salesChannelDefaultAssignments</li><li>currency.salesChannelDomains</li><li>currency.shippingMethodPrices</li><li>currency.promotionDiscountPrices</li><li>currency.isSystemDefault</li><li>currency.productExports</li><li>currency.countryRoundings</li><li>currency.itemRounding</li><li>currency.totalRounding</li><li>currency.taxFreeFrom <br></li><li>currency.translated.customFields<br></li></ul><h2>context</h2><ul><li>context.languageIdChain</li><li>context.versionId</li><li>context.currencyId</li><li>context.currencyFactor</li><li>context.scope</li><li>context.ruleIds</li><li>context.source</li><li>context.considerInheritance</li><li>context.taxState</li><li>context.rounding <br></li></ul><h2>ruleIds - array with active rule ids </h2><h2>customer </h2><ul><li>customer.groupId</li><li>customer.defaultPaymentMethodId</li><li>customer.salesChannelId</li><li>customer.languageId</li><li>customer.lastPaymentMethodId</li><li>customer.defaultBillingAddressId</li><li>customer.defaultShippingAddressId</li><li>customer.customerNumber</li><li>customer.salutationId</li><li>customer.firstName</li><li>customer.lastName</li><li>customer.company</li><li>customer.password</li><li>customer.email</li><li>customer.title</li><li>customer.vatIds</li><li>customer.affiliateCode</li><li>customer.campaignCode</li><li>customer.active</li><li>customer.doubleOptInRegistration</li><li>customer.doubleOptInEmailSentDate</li><li>customer.doubleOptInConfirmDate</li><li>customer.hash</li><li>customer.guest</li><li>customer.firstLogin</li><li>customer.lastLogin</li><li>customer.newsletter</li><li>customer.birthday</li><li>customer.lastOrderDate</li><li>customer.orderCount</li><li>customer.orderTotalAmount</li><li>customer.createdAt</li><li>customer.updatedAt</li><li>customer.legacyEncoder</li><li>customer.legacyPassword</li><li>customer.group</li><li>customer.defaultPaymentMethod</li><li>customer.salesChannel</li><li>customer.language</li><li>customer.lastPaymentMethod</li><li>customer.salutation</li><li>customer.defaultBillingAddress</li><li>customer.defaultShippingAddress</li><li>customer.activeBillingAddress</li><li>customer.activeShippingAddress</li><li>customer.addresses</li><li>customer.orderCustomers</li><li>customer.autoIncrement</li><li>customer.tags</li><li>customer.tagIds</li><li>customer.promotions</li><li>customer.recoveryCustomer</li><li>customer.productReviews</li><li>customer.remoteAddress</li><li>customer.requestedGroupId</li><li>customer.requestedGroup</li><li>customer.boundSalesChannelId</li><li>customer.boundSalesChannel</li><li>customer.wishlists <br></li><li>customer.customFields<br></li></ul><h2>cart</h2><ul><li>cart.name</li><li>cart.token</li><li>cart.price.netPrice</li><li>cart.price.totalPrice</li><li>cart.price.calculatedTaxes</li><li>cart.price.taxRules</li><li>cart.price.positionPrice</li><li>cart.price.taxStatus</li><li>cart.price.rawTotal<br></li><li>cart.lineItems</li><li>cart.errors</li><li>cart.deliveries</li><li>cart.transactions</li><li>cart.modified</li><li>cart.customerComment</li><li>cart.affiliateCode</li><li>cart.campaignCode</li><li>cart.data</li><li>cart.ruleIds <br></li></ul><h2>lineItems - array with line item </h2><h2>lineItem</h2><ul><li>lineItem.id</li><li>lineItem.referencedId</li><li>lineItem.label</li><li>lineItem.quantity</li><li>lineItem.type</li><li>lineItem.priceDefinition</li><li>lineItem.price</li><li>lineItem.good</li><li>lineItem.description</li><li>lineItem.cover</li><li>lineItem.deliveryInformation</li><li>lineItem.children</li><li>lineItem.requirement</li><li>lineItem.removable</li><li>lineItem.stackable</li><li>lineItem.quantityInformation</li><li>lineItem.modified</li><li>lineItem.dataTimestamp</li><li>lineItem.dataContextHash</li><li><b>lineItem.payload</b></li><li>lineItem.payload.isCloseout</li><li>lineItem.payload.customFields</li><li>lineItem.payload.createdAt</li><li>lineItem.payload.releaseDate</li><li>lineItem.payload.isNew</li><li>lineItem.payload.markAsTopseller</li><li>lineItem.payload.purchasePrices</li><li>lineItem.payload.productNumber</li><li>lineItem.payload.manufacturerId</li><li>lineItem.payload.taxId</li><li>lineItem.payload.tagIds</li><li>lineItem.payload.categoryIds</li><li>lineItem.payload.propertyIds</li><li>lineItem.payload.optionIds</li><li>lineItem.payload.options</li><li>lineItem.payload.length</li><li>lineItem.payload.height</li><li>lineItem.payload.width</li><li>lineItem.payload.deliveryTime</li><li>lineItem.payload.features</li><li>lineItem.deliveryInformation.weight <br></li></ul><h2>salesChannel</h2><ul><li>salesChannel.typeId</li><li>salesChannel.languageId</li><li>salesChannel.currencyId</li><li>salesChannel.paymentMethodId</li><li>salesChannel.shippingMethodId</li><li>salesChannel.countryId</li><li>salesChannel.navigationCategoryId</li><li>salesChannel.navigationCategoryDepth</li><li>salesChannel.homeSlotConfig</li><li>salesChannel.homeCmsPageId</li><li>salesChannel.homeCmsPage</li><li>salesChannel.homeEnabled</li><li>salesChannel.homeName</li><li>salesChannel.homeMetaTitle</li><li>salesChannel.homeMetaDescription</li><li>salesChannel.homeKeywords</li><li>salesChannel.footerCategoryId</li><li>salesChannel.serviceCategoryId</li><li>salesChannel.name</li><li>salesChannel.shortName</li><li>salesChannel.accessKey</li><li>salesChannel.currencies</li><li>salesChannel.languages</li><li>salesChannel.configuration</li><li>salesChannel.active</li><li>salesChannel.maintenance</li><li>salesChannel.maintenanceIpWhitelist</li><li>salesChannel.taxCalculationType</li><li>salesChannel.type</li><li>salesChannel.currency</li><li>salesChannel.language</li><li>salesChannel.paymentMethod</li><li>salesChannel.shippingMethod</li><li>salesChannel.country</li><li>salesChannel.orders</li><li>salesChannel.customers</li><li>salesChannel.countries</li><li>salesChannel.paymentMethods</li><li>salesChannel.shippingMethods</li><li>salesChannel.translations</li><li>salesChannel.domains</li><li>salesChannel.systemConfigs</li><li>salesChannel.navigationCategory</li><li>salesChannel.footerCategory</li><li>salesChannel.serviceCategory</li><li>salesChannel.productVisibilities</li><li>salesChannel.mailHeaderFooterId</li><li>salesChannel.numberRangeSalesChannels</li><li>salesChannel.mailHeaderFooter</li><li>salesChannel.customerGroupId</li><li>salesChannel.customerGroup</li><li>salesChannel.newsletterRecipients</li><li>salesChannel.promotionSalesChannels</li><li>salesChannel.documentBaseConfigSalesChannels</li><li>salesChannel.productReviews</li><li>salesChannel.seoUrls</li><li>salesChannel.seoUrlTemplates</li><li>salesChannel.mainCategories</li><li>salesChannel.paymentMethodIds</li><li>salesChannel.productExports</li><li>salesChannel.hreflangActive</li><li>salesChannel.hreflangDefaultDomainId</li><li>salesChannel.hreflangDefaultDomain</li><li>salesChannel.analyticsId</li><li>salesChannel.analytics</li><li>salesChannel.customerGroupsRegistrations</li><li>salesChannel.eventActions</li><li>salesChannel.boundCustomers</li><li>salesChannel.wishlists</li><li>salesChannel.landingPages <br></li><li>salesChannel.translated.customFields<br></li></ul><h2>shippingMethod</h2><ul><li>shippingMethod.translated.name</li><li>shippingMethod.active</li><li>shippingMethod.description</li><li>shippingMethod.trackingUrl</li><li>shippingMethod.deliveryTimeId</li><li>shippingMethod.deliveryTime</li><li>shippingMethod.translations</li><li>shippingMethod.orderDeliveries</li><li>shippingMethod.salesChannelDefaultAssignments</li><li>shippingMethod.salesChannels</li><li>shippingMethod.availabilityRule</li><li>shippingMethod.availabilityRuleId</li><li>shippingMethod.prices</li><li>shippingMethod.mediaId</li><li>shippingMethod.taxId</li><li>shippingMethod.media</li><li>shippingMethod.tags</li><li>shippingMethod.taxType</li><li>shippingMethod.tax <br></li><li>shippingMethod.translated.customFields</li></ul><h2>paymentMethod</h2><ul><li>paymentMethod.pluginId</li><li>paymentMethod.handlerIdentifier</li><li>paymentMethod.translated.name</li><li>paymentMethod.distinguishableName</li><li>paymentMethod.description</li><li>paymentMethod.position</li><li>paymentMethod.active</li><li>paymentMethod.afterOrderEnabled</li><li>paymentMethod.plugin</li><li>paymentMethod.translations</li><li>paymentMethod.orderTransactions</li><li>paymentMethod.customers</li><li>paymentMethod.salesChannelDefaultAssignments</li><li>paymentMethod.salesChannels</li><li>paymentMethod.availabilityRule</li><li>paymentMethod.availabilityRuleId</li><li>paymentMethod.mediaId</li><li>paymentMethod.media</li><li>paymentMethod.formattedHandlerIdentifier</li><li>paymentMethod.shortName</li><li>paymentMethod.appPaymentMethod <br></li><li>paymentMethod.translated.customFields</li></ul><h2>customerGroup</h2><ul><li>customerGroup.name</li><li>customerGroup.translated.name</li><li>customerGroup.displayGross</li><li>customerGroup.translations</li><li>customerGroup.customers</li><li>customerGroup.salesChannels</li><li>customerGroup.registrationActive</li><li>customerGroup.registrationTitle</li><li>customerGroup.registrationIntroduction</li><li>customerGroup.registrationOnlyCompanyRegistration</li><li>customerGroup.registrationSeoMetaDescription</li><li>customerGroup.registrationSalesChannels</li><li>customerGroup.translated.customFields</li></ul><h3>taxRules<i> (Auflistung der im Shop verfügbaren Steuern - PHP-Klasse <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/System/Tax/TaxCollection.php\" target=\"_blank\" rel=\"noreferrer\">TaxCollection</a>)<br></i></h3><ul><li>taxRules.ids</li><li>taxRules.elements</li></ul><br><h4>\n\n\nErweiterung ab Pluginversion 2.2.0 - Ermittlung des Steuersatzes<br></h4>Der für die Versandart relevante Steuersatz wird in Shopware über den \"Steuer-Typ\" (Auto, Höchster Satz oder Fester Satz) ermittelt. Das Ergebnis daraus speichern wir ab sofort in der Variablen \"matchingTaxRules\", diese entspricht der PHP-Klasse https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php.\nSie können somit den aktuell höchsten Steuersatz im Warenkorb über die folgende Twig-Variable auslesen: <br>{{ matchingTaxRules.highestRate().getTaxRate() }} Mit diesem Steuersatz können Sie nun rechnen.","installationManual":"<p>\nDie Installation des Plugins geht sehr schnell und ist unkompliziert.</p><ul><li>Plugin Manager über Einstellungen &gt; System &gt; Plugins aufrufen</li><li>Das Plugin hochladen, installieren und aktivieren</li><li>Keine weiter Konfiguration des Plugins erforderlich </li></ul>","shortDescription":"Das Plugin fügt die Möglichkeit hinzu, den Versand manuell zu berechnen. Mithilfe von lineitems vom Warenkorb können Sie diese zur Berechnung des Versands verwenden.","highlights":"Versandkosten manuell berechnen lassen \nVersandberechnung auf der Detailseite der Versandart manuell hinzufügen\nLineItems selbst bestimmen\nVertriebkanäle selbst wählen","features":"Manuelle Versandkosten Berechnung\nFür jede Versandart möglich \nIndiviudelle Berechnung für einzelne Versandarten"},{"id":22663,"name":"Shipping calculation","description":"<h3>Use of the plugin</h3><p>The plugin adds the possibility to calculate shipping manually. To calculate shipping. costs you can use lineitems from the shopping cart as a price matrix. <br></p><p><br></p><h3>Functionality</h3><ul><li>It is possible to add manually shipping calculation in shipping method detail page.</li><li>Default values added:\n\n\n<ul><li>SalesChannel</li><li>LineItems (lineItem works only for foreach loop).</li></ul></li></ul><ul><li>If there is no float value to return then it will be used next matrix price if exist or default price.</li></ul><p><br></p><h3>Manual calculation of shipping costs</h3><p>In the area Settings -&gt; Shop-&gt; Shipping -&gt; Create or edit shipping type.<br>Here it is possible via a price matrix, to calculate the shipping manually.</p><p><br></p>Shipping calculation field is based on twig template and twig functions should be called in operations with data.<br><p>In \"lineItems\" are all products from the cart. And there is added current \"salesChannel\" data.<br></p><p><br></p><p>You have lineItems form cart here and you can use them to calculate shipping.<br></p><p><br></p><h3>Example #1: (set shipping costs to 10 without further rules)<br></h3>{% set shipping = 10 %}<br><p>{{ shipping }}</p><p><br></p><h3>Example #2: (if there is product with a customField, than increase shipping costs)<br></h3><p>{​​% for lineItem in lineItems %}​​<br>{​​% if lineItem.payload.customFields.attribute== \"1\" %}​​<br>{​​% set shipping = shipping + 1 %}​​<br>{​​% endif %}​​<br>{​​% endif %}​​<br>{​​{​​ shipping }​​}​​</p><p><br></p><h3>Example #3: (Shipping costs based on number of products inside categories)</h3>{% set numberProductsInsideCategory1 = 0 %}<br>{% set numberProductsInsideCategory2 = 0 %}<br><br>{% for lineItem in lineItems %}<br>&nbsp;&nbsp;&nbsp; {% if lineItem.payload.categoryIds %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% for categoryId in lineItem.payload.categoryIds %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {# Is product inside category 1 - we check it by the UUID #}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% if categoryId == '21b199946c884aa294b409f135963880' %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% set numberProductsInsideCategory1 = numberProductsInsideCategory1 + 1 %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endif %}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {# Is product inside category 2 - we check it by the UUID? #}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% if categoryId == '0b5e8204e7034c2ca17a3899274874a4' %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% set numberProductsInsideCategory2 = numberProductsInsideCategory2 + 1 %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endif %}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {% endfor %}<br>&nbsp;&nbsp;&nbsp; {% endif %}<br>{% endfor %}<br><br>{# Now we can do something with the variables numberProductsInsideCategory1 and numberProductsInsideCategory2 #}<br>{% if numberProductsInsideCategory1 &gt; 0 and numberProductsInsideCategory2 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 19.90<br>{% elseif numberProductsInsideCategory1 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 14.90<br>{% elseif numberProductsInsideCategory2 &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; 12.90<br>{% else %}<br>&nbsp;&nbsp;&nbsp; 9.90<br><p>{% endif %}</p><p><br></p><p><b>Note:</b> Only the UUIDs of the categories (unique ID in the database) are available in the shopping cart. You can easily read out and copy the UUID via the plugin <a href=\"https://store.shopware.com/en/acris28622190382f/acris-display-category-id.html\" target=\"_blank\" rel=\"noreferrer noopener\">https://store.shopware.com/en/acris28622190382f/acris-display-category-id.html</a>.</p><p><br></p><h3>Example #4: Quantity detection<br></h3>\n\n{% set quantity = 0 %}<br>\n{% for lineItem in lineItems %}<br>\n&nbsp;&nbsp;&nbsp; {% if lineItem.quantity %}<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n{% set quantity = quantity + lineItem.quantity %}<br>&nbsp;&nbsp;&nbsp; \n{% endif %}<br>\n{% endfor %}<br><p>\n{{ quantity }} <br></p><p><br></p><h3>Example #5: Customer custom field shipping free limit<br></h3><p>{% set customerShippingFreeLimit = false %}<br>{% if customer.customFields is not empty and customer.customFields.custom_customer_shipping_free_limit &gt; 0 %}<br>&nbsp;&nbsp;&nbsp; {% set customerShippingFreeLimit = customer.customFields.custom_customer_shipping_free_limit %}<br>{% endif %}<br><br>{% set shippingCosts = 9.95 %}<br>{% if customerShippingFreeLimit &gt; 0 and cart.price.totalPrice &gt;= customerShippingFreeLimit&nbsp; %}<br>&nbsp;&nbsp;&nbsp; {% set shippingCosts = 0 %}<br>{% endif %}<br><br>{{ shippingCosts }}</p><p><br></p><h3>Example #6: Adding VAT to the net price of the shipping costs, depending on the country of delivery and the contents of the shopping basket</h3><p></p><p>{% set shippingNet = 100 %}<br><br>{% if context.taxState == 'gross' and matchingTaxRules and matchingTaxRules.highestRate() %}<br>&nbsp;&nbsp;&nbsp; {% set shippingNet = shippingNet / 100 * matchingTaxRules.highestRate().getPercentage() %}<br>&nbsp;&nbsp;&nbsp; {% set shipping = shippingNet * (1 + (matchingTaxRules.highestRate().getTaxRate() / 100)) %}<br>{% else %}<br>&nbsp;&nbsp;&nbsp; {% set shipping = shippingNet %}<br>{% endif %}<br><br>{{ shipping }}<br></p><p><br></p>---<p></p><p><br></p><h2>Possible variables<br></h2><h3>matchingTaxRules<i> (Taxes relevant to the dispatch type, determined via tax type - PHP class <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php\" target=\"_blank\" rel=\"noreferrer\">TaxRuleCollection</a>)</i></h3><ul><li>matchingTaxRules.highestRate().getTaxRate()&nbsp;<br></li></ul><h2>currency </h2><ul><li>currency.isoCode</li><li>currency.factor</li><li>currency.symbol</li><li>currency.shortName</li><li>currency.name</li><li>currency.position</li><li>currency.translations</li><li>currency.orders</li><li>currency.salesChannels</li><li>currency.salesChannelDefaultAssignments</li><li>currency.salesChannelDomains</li><li>currency.shippingMethodPrices</li><li>currency.promotionDiscountPrices</li><li>currency.isSystemDefault</li><li>currency.productExports</li><li>currency.countryRoundings</li><li>currency.itemRounding</li><li>currency.totalRounding</li><li>currency.taxFreeFrom <br></li><li>currency.translated.customFields</li></ul><h2>context</h2><ul><li>context.languageIdChain</li><li>context.versionId</li><li>context.currencyId</li><li>context.currencyFactor</li><li>context.scope</li><li>context.ruleIds</li><li>context.source</li><li>context.considerInheritance</li><li>context.taxState</li><li>context.rounding <br></li></ul><h2>ruleIds - array with active rule ids </h2><h2>customer </h2><ul><li>customer.groupId</li><li>customer.defaultPaymentMethodId</li><li>customer.salesChannelId</li><li>customer.languageId</li><li>customer.lastPaymentMethodId</li><li>customer.defaultBillingAddressId</li><li>customer.defaultShippingAddressId</li><li>customer.customerNumber</li><li>customer.salutationId</li><li>customer.firstName</li><li>customer.lastName</li><li>customer.company</li><li>customer.password</li><li>customer.email</li><li>customer.title</li><li>customer.vatIds</li><li>customer.affiliateCode</li><li>customer.campaignCode</li><li>customer.active</li><li>customer.doubleOptInRegistration</li><li>customer.doubleOptInEmailSentDate</li><li>customer.doubleOptInConfirmDate</li><li>customer.hash</li><li>customer.guest</li><li>customer.firstLogin</li><li>customer.lastLogin</li><li>customer.newsletter</li><li>customer.birthday</li><li>customer.lastOrderDate</li><li>customer.orderCount</li><li>customer.orderTotalAmount</li><li>customer.createdAt</li><li>customer.updatedAt</li><li>customer.legacyEncoder</li><li>customer.legacyPassword</li><li>customer.group</li><li>customer.defaultPaymentMethod</li><li>customer.salesChannel</li><li>customer.language</li><li>customer.lastPaymentMethod</li><li>customer.salutation</li><li>customer.defaultBillingAddress</li><li>customer.defaultShippingAddress</li><li>customer.activeBillingAddress</li><li>customer.activeShippingAddress</li><li>customer.addresses</li><li>customer.orderCustomers</li><li>customer.autoIncrement</li><li>customer.tags</li><li>customer.tagIds</li><li>customer.promotions</li><li>customer.recoveryCustomer</li><li>customer.productReviews</li><li>customer.remoteAddress</li><li>customer.requestedGroupId</li><li>customer.requestedGroup</li><li>customer.boundSalesChannelId</li><li>customer.boundSalesChannel</li><li>customer.wishlists&nbsp;</li><li>customer.customFields<br></li></ul><h2>cart</h2><ul><li>cart.name</li><li>cart.token</li><li>cart.price.netPrice</li><li>cart.price.totalPrice</li><li>cart.price.calculatedTaxes</li><li>cart.price.taxRules</li><li>cart.price.positionPrice</li><li>cart.price.taxStatus</li><li>cart.price.rawTotal<br></li><li>cart.lineItems</li><li>cart.errors</li><li>cart.deliveries</li><li>cart.transactions</li><li>cart.modified</li><li>cart.customerComment</li><li>cart.affiliateCode</li><li>cart.campaignCode</li><li>cart.data</li><li>cart.ruleIds <br></li></ul><h2>lineItems - array with line item </h2><h2>lineItem</h2><ul><li>lineItem.id</li><li>lineItem.referencedId</li><li>lineItem.label</li><li>lineItem.quantity</li><li>lineItem.type</li><li>lineItem.priceDefinition</li><li>lineItem.price</li><li>lineItem.good</li><li>lineItem.description</li><li>lineItem.cover</li><li>lineItem.deliveryInformation</li><li>lineItem.children</li><li>lineItem.requirement</li><li>lineItem.removable</li><li>lineItem.stackable</li><li>lineItem.quantityInformation</li><li>lineItem.modified</li><li>lineItem.dataTimestamp</li><li>lineItem.dataContextHash</li><li><b>lineItem.payload</b></li><li>lineItem.payload.isCloseout</li><li>lineItem.payload.customFields</li><li>lineItem.payload.createdAt</li><li>lineItem.payload.releaseDate</li><li>lineItem.payload.isNew</li><li>lineItem.payload.markAsTopseller</li><li>lineItem.payload.purchasePrices</li><li>lineItem.payload.productNumber</li><li>lineItem.payload.manufacturerId</li><li>lineItem.payload.taxId</li><li>lineItem.payload.tagIds</li><li>lineItem.payload.categoryIds</li><li>lineItem.payload.propertyIds</li><li>lineItem.payload.optionIds</li><li>lineItem.payload.options</li><li>lineItem.payload.length</li><li>lineItem.payload.height</li><li>lineItem.payload.width</li><li>lineItem.payload.deliveryTime</li><li>lineItem.payload.features</li><li>lineItem.deliveryInformation.weight <br></li></ul><h2>salesChannel</h2><ul><li>salesChannel.typeId</li><li>salesChannel.languageId</li><li>salesChannel.currencyId</li><li>salesChannel.paymentMethodId</li><li>salesChannel.shippingMethodId</li><li>salesChannel.countryId</li><li>salesChannel.navigationCategoryId</li><li>salesChannel.navigationCategoryDepth</li><li>salesChannel.homeSlotConfig</li><li>salesChannel.homeCmsPageId</li><li>salesChannel.homeCmsPage</li><li>salesChannel.homeEnabled</li><li>salesChannel.homeName</li><li>salesChannel.homeMetaTitle</li><li>salesChannel.homeMetaDescription</li><li>salesChannel.homeKeywords</li><li>salesChannel.footerCategoryId</li><li>salesChannel.serviceCategoryId</li><li>salesChannel.name</li><li>salesChannel.shortName</li><li>salesChannel.accessKey</li><li>salesChannel.currencies</li><li>salesChannel.languages</li><li>salesChannel.configuration</li><li>salesChannel.active</li><li>salesChannel.maintenance</li><li>salesChannel.maintenanceIpWhitelist</li><li>salesChannel.taxCalculationType</li><li>salesChannel.type</li><li>salesChannel.currency</li><li>salesChannel.language</li><li>salesChannel.paymentMethod</li><li>salesChannel.shippingMethod</li><li>salesChannel.country</li><li>salesChannel.orders</li><li>salesChannel.customers</li><li>salesChannel.countries</li><li>salesChannel.paymentMethods</li><li>salesChannel.shippingMethods</li><li>salesChannel.translations</li><li>salesChannel.domains</li><li>salesChannel.systemConfigs</li><li>salesChannel.navigationCategory</li><li>salesChannel.footerCategory</li><li>salesChannel.serviceCategory</li><li>salesChannel.productVisibilities</li><li>salesChannel.mailHeaderFooterId</li><li>salesChannel.numberRangeSalesChannels</li><li>salesChannel.mailHeaderFooter</li><li>salesChannel.customerGroupId</li><li>salesChannel.customerGroup</li><li>salesChannel.newsletterRecipients</li><li>salesChannel.promotionSalesChannels</li><li>salesChannel.documentBaseConfigSalesChannels</li><li>salesChannel.productReviews</li><li>salesChannel.seoUrls</li><li>salesChannel.seoUrlTemplates</li><li>salesChannel.mainCategories</li><li>salesChannel.paymentMethodIds</li><li>salesChannel.productExports</li><li>salesChannel.hreflangActive</li><li>salesChannel.hreflangDefaultDomainId</li><li>salesChannel.hreflangDefaultDomain</li><li>salesChannel.analyticsId</li><li>salesChannel.analytics</li><li>salesChannel.customerGroupsRegistrations</li><li>salesChannel.eventActions</li><li>salesChannel.boundCustomers</li><li>salesChannel.wishlists</li><li>salesChannel.landingPages <br></li><li>salesChannel.translated.customFields</li></ul><h2>shippingMethod</h2><ul><li>shippingMethod.translated.name</li><li>shippingMethod.active</li><li>shippingMethod.description</li><li>shippingMethod.trackingUrl</li><li>shippingMethod.deliveryTimeId</li><li>shippingMethod.deliveryTime</li><li>shippingMethod.translations</li><li>shippingMethod.orderDeliveries</li><li>shippingMethod.salesChannelDefaultAssignments</li><li>shippingMethod.salesChannels</li><li>shippingMethod.availabilityRule</li><li>shippingMethod.availabilityRuleId</li><li>shippingMethod.prices</li><li>shippingMethod.mediaId</li><li>shippingMethod.taxId</li><li>shippingMethod.media</li><li>shippingMethod.tags</li><li>shippingMethod.taxType</li><li>shippingMethod.tax <br></li><li>shippingMethod.translated.customFields</li></ul><h2>paymentMethod</h2><ul><li>paymentMethod.pluginId</li><li>paymentMethod.handlerIdentifier</li><li>paymentMethod.translated.name</li><li>paymentMethod.distinguishableName</li><li>paymentMethod.description</li><li>paymentMethod.position</li><li>paymentMethod.active</li><li>paymentMethod.afterOrderEnabled</li><li>paymentMethod.plugin</li><li>paymentMethod.translations</li><li>paymentMethod.orderTransactions</li><li>paymentMethod.customers</li><li>paymentMethod.salesChannelDefaultAssignments</li><li>paymentMethod.salesChannels</li><li>paymentMethod.availabilityRule</li><li>paymentMethod.availabilityRuleId</li><li>paymentMethod.mediaId</li><li>paymentMethod.media</li><li>paymentMethod.formattedHandlerIdentifier</li><li>paymentMethod.shortName</li><li>paymentMethod.appPaymentMethod <br></li><li>paymentMethod.translated.customFields</li></ul><h2>customerGroup</h2><ul><li>customerGroup.name</li><li>customerGroup.translated.name</li><li>customerGroup.displayGross</li><li>customerGroup.translations</li><li>customerGroup.customers</li><li>customerGroup.salesChannels</li><li>customerGroup.registrationActive</li><li>customerGroup.registrationTitle</li><li>customerGroup.registrationIntroduction</li><li>customerGroup.registrationOnlyCompanyRegistration</li><li>customerGroup.registrationSeoMetaDescription</li><li>customerGroup.registrationSalesChannels</li><li>customerGroup.translated.customFields</li></ul><h3>taxRules<i> (Listing of taxes available in the shop - PHP class <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/System/Tax/TaxCollection.php\" target=\"_blank\" rel=\"noreferrer\">TaxCollection</a>)<br></i></h3><ul><li>taxRules.ids</li><li>taxRules.elements</li></ul><p><br></p><h4>Extension as of plug-in version 2.2.0 - Determination of the tax rate <br></h4><p>The tax rate relevant for the shipping method is determined in Shopware via the \"tax type\" (auto, highest rate or fixed rate). From now on we store the result of this in the variable \"matchingTaxRules\", this corresponds to the PHP class https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php. You can thus read out the current highest tax rate in the shopping cart via the following Twig variable: <br></p><p>{{ matchingTaxRules.highestRate().getTaxRate() }} You can now calculate with this tax rate.\n</p>","installationManual":"<p><b> The installation of the plugin is very fast and straightforward.</b></p><ul><li>Open the Plugin Manager via Settings &gt; System &gt; Plugins.</li><li>Upload, install and activate the plugin</li><li>No further configuration of the plugin required </li></ul>","shortDescription":"The plugin adds the possibility to calculate shipping manually. To calculate shipping. costs you can use lineitems from the shopping cart as a price matrix.","highlights":"Calculate shipping costs manually \nManually add shipping calculation on shipping type detail page\nDetermine LineItems yourself\nChoose distribution channels yourself","features":"Manual shipping cost calculation\nPossible for each shipping method \nIndiviudelle calculation for individual shipping types"}],"addons":["enterpriseCertified","highlightInListing"],"standardLocale":{"id":1,"name":"de_DE"},"priceModels":[{"id":162801,"bookingKey":"acris76074869522","bookingText":"ACRIS Shipping calculation","price":299,"subscription":true,"discount":0,"discr":"priceModelBuy"},{"id":162800,"bookingKey":"acris76074869522_M","bookingText":"ACRIS Shipping calculation","price":59.9,"duration":1,"trialPhaseIncluded":true,"discount":0,"discountAppliesForMonths":null,"discr":"priceModelRent"}],"pictures":[{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpduKMSq","preview":true,"priority":0,"id":67836},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phphdww5a","preview":false,"priority":0,"id":59487},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/php6gL5hd","preview":false,"priority":0,"id":59488},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpqwfjLp","preview":false,"priority":0,"id":59529},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpUElBFr","preview":false,"priority":0,"id":59530},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpO5c40r","preview":false,"priority":0,"id":59531},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phpSInq4r","preview":false,"priority":0,"id":59532},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/phphFaSXr","preview":false,"priority":0,"id":59533},{"remoteLink":"https://sbp-plugin-images.s3.eu-west-1.amazonaws.com/php2jeP7r","preview":false,"priority":0,"id":59534}],"comments":[{"authorName":"Markus","text":"Leider ist es, aus mir unerklärlichen Gründen, nicht möglich, im Standard von SW6 individuelle Versandkostenberechnungen vorzunehmen.\n\nMit diesem Plugin lassen sich eigentlich simple Berechnungen auch wieder simpel durchführen.\nBeispielsweise Versandgewicht bis 5 kg = Preis x \nFür jedes hinzu kommende KG zahlt der Kunde y, addieert auf x.\n\nKein Problem mit diesem Plugin.\n\nP.S.: Schade, dass derartig nötige Funktionen nicht Standard sind.","headline":"Endlich wieder individuelle Berechnungen","creationDate":{"date":"2023-03-27 16:02:24.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10},{"authorName":"Henning Vielitz","text":"Wir nutzen einige Erweiterungen von Acris und sind IMMER und durchgehend damit gut gefahren.\nDer Support ist Weltklasse, antwortet schnell und präzise und hilft auch darüber hinaus, wo sie können.","headline":"Acris = Erweiterung und Support 1+","creationDate":{"date":"2023-03-13 16:05:51.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10},{"authorName":"Axel G.","text":"Das Plugin löst das Problem individuell berechneter Versandkosten auf denkbar einfache Weise. Unser Wunsch auch eigene Twig-Funktionen verwenden zu können wurde in Rekordtempo umgesetzt. Dieser Support ist sowohl in Sachen Reaktionsgeschwindigkeit als auch Zielorientierung spitze. Danke!","headline":"Produkt und Service sind erstklassig","creationDate":{"date":"2022-06-08 14:01:16.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10},{"authorName":"Nikolaus Pluta","text":"Es ist möglich alle Parameter die von Interesse sind mit TWIG Programmiertechnisch abzubilden und individuell zu errechnen. Beauftragen Sie mich wenn Sie Hilfe benötigen. Mein Name in Google reicht.","headline":"Endlich die Erweiterung nach der man sucht wenn man komplexen Versand berechnen will.","creationDate":{"date":"2021-12-09 12:01:08.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10},{"authorName":"Fabian Schmitz","text":"Wahrscheinlich unser wichtigstes Plugin, um auch komplexere Versandkostenstrukturen abzubilden, die nicht nach Gewicht oder Anzahl gehen. Extrem simpel zu bedienen, Zusatzvariablen wurden vom Support innerhalb von Tagen eingebaut.","headline":"Essenzielle Erweiterung","creationDate":{"date":"2021-11-29 10:30:42.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10},{"authorName":"Quadro GmbH","text":"Top Plugin, Top Entwickler mit schnellem Support.\nHatte einige Probleme und Fragen zum Versand, die alle schnell und erfolgreich gelöst werden konnten.","headline":"Tut was es soll","creationDate":{"date":"2021-05-31 09:20:56.000000","timezone_type":3,"timezone":"Europe/Berlin"},"rating":10}],"ratingAverage":10,"label":"individuelle Versandkosten Berechnung mit TWIG Vorlagen","description":"<h2>Nutzung des Plugins</h2><p>Das Plugin fügt die Möglichkeit hinzu, den Versand manuell zu berechnen. Mithilfe von lineitems vom Warenkorb können Sie diese zur Berechnung des Versands verwenden. Das Feld \"Versandberechnung\" basiert auf der Twig-Vorlage und die Twig-Funktionen sollten in Operationen mit Daten aufgerufen werden.<br />In \"lineItems\" sind alle Produkte aus dem Warenkorb. Und dort sind aktuelle \"salesChannel\" Daten hinzugefügt.</p><p>Ermöglicht somit komplexeste Versandkostenermittlung mit relativ einfachen Mitteln (TWIG) via Shopware Admin Oberfläche.<br /></p><h3><br /></h3><h3>Funktionsweise <br /></h3><ul><li>Es ist möglich, die Versandberechnung auf der Detailseite der Versandart manuell hinzuzufügen.</li><li>Standardwerte hinzugefügt: <br /><ul><li>Vertriebskanal</li><li>LineItems (lineItem funktioniert nur bei foreach-Schleife).</li></ul></li></ul><ul><li>Wenn kein Float-Wert zurückgegeben werden kann, wird der nächste Matrixpreis (falls vorhanden) oder der Standardpreis verwendet.</li></ul><p><br /></p><h3>Manuelle Berechnung der Versandkosten </h3><p>Im\n\nBereich Einstellungen -&gt; Shop-&gt; Versand -&gt; Versandart anlegen oder bearbeiten <br /></p><p>Hier ist es möglich über eine Preismatrix, den Versand <b>manuell berechnen</b> zu lassen.</p><p><br /></p><p>Sie haben hier lineItems vom Warenkorb und können diese zur Berechnung des Versands verwenden.<br /></p><p><br /></p><h3>Beispiel #1: (Versandkosten fix auf 10 ohne weiterer Regeln)<br /></h3>{% set shipping = 10 %}<br /><p>{{ shipping }}</p><p><br /></p><h3>Beispiel #2: (Versandkosten erhöhen sich um einen Wert, abhängig davon ob ein Artikel mit dem CustomField im Warenkorb liegt)<br /></h3><p>{% set shipping = 10 %}<br />{% for lineItem in lineItems %}<br />    {% if lineItem.payload.customFields.custom_sw4_attributes_attr7 == \"1\" %}<br />        {% set shipping = shipping + 1 %}<br />    {% endif %}<br />{% endfor %}<br />{{ shipping }}</p><p><br /></p><h3>Beispiel #3: (Versandkosten je nachdem in welchen Kategorien sich die Produkte Warenkorb befinden)</h3><p>{% set numberProductsInsideCategory1 = 0 %}<br />{% set numberProductsInsideCategory2 = 0 %}<br /><br />{% for lineItem in lineItems %}<br />    {% if lineItem.payload.categoryIds %}<br />        {% for categoryId in lineItem.payload.categoryIds %}<br />            {# Is product inside category 1 - we check it by the UUID #}<br />            {% if categoryId == '21b199946c884aa294b409f135963880' %}<br />                {% set numberProductsInsideCategory1 = numberProductsInsideCategory1 + 1 %}<br />            {% endif %}<br /><br />            {# Is product inside category 2 - we check it by the UUID? #}<br />            {% if categoryId == '0b5e8204e7034c2ca17a3899274874a4' %}<br />                {% set numberProductsInsideCategory2 = numberProductsInsideCategory2 + 1 %}<br />            {% endif %}<br />        {% endfor %}<br />    {% endif %}<br />{% endfor %}<br /><br />{# Now we can do something with the variables numberProductsInsideCategory1 and numberProductsInsideCategory2 #}<br />{% if numberProductsInsideCategory1 &gt; 0 and numberProductsInsideCategory2 &gt; 0 %}<br />    19.90<br />{% elseif numberProductsInsideCategory1 &gt; 0 %}<br />    14.90<br />{% elseif numberProductsInsideCategory2 &gt; 0 %}<br />    12.90<br />{% else %}<br />    9.90<br />{% endif %}<br /></p><p><b>Hinweis:</b> Es sind im Warenkorb nur die UUIDs der Kategorien (einmalige ID in der Datenbank) verfügbar. Die UUID kannst du sehr einfach über das Plugin <a href=\"https://store.shopware.com/acris28622190382f/acris-kategorie-id-anzeigen.html\" target=\"_blank\" rel=\"noreferrer noopener\">https://store.shopware.com/acris28622190382f/acris-kategorie-id-anzeigen.html</a> auslesen und kopieren.</p><h3><br /></h3><h3>Beispiel #4: Mengen Ermittlung</h3>\n\n{% set quantity = 0 %}<br />\n{% for lineItem in lineItems %}<br />\n    {% if lineItem.quantity %}<br />        \n{% set quantity = quantity + lineItem.quantity %}<br />    \n{% endif %}<br />\n{% endfor %}<br /><p>\n{{ quantity }} <br /></p><p><br /></p><h3>Beispiel #5: Kunden Freitextfeld Freihausgrenze</h3><p>{% set customerShippingFreeLimit = false %}<br />{% if customer.customFields is not empty and customer.customFields.custom_customer_shipping_free_limit &gt; 0 %}<br />    {% set customerShippingFreeLimit = customer.customFields.custom_customer_shipping_free_limit %}<br />{% endif %}<br /><br />{% set shippingCosts = 9.95 %}<br />{% if customerShippingFreeLimit &gt; 0 and cart.price.totalPrice &gt;= customerShippingFreeLimit  %}<br />    {% set shippingCosts = 0 %}<br />{% endif %}<br /><br />{{ shippingCosts }}</p><p><br /></p><h3>Beispiel #6: Hinzufügen der Mehrwertsteuer je nach Lieferland und Warenkorbinhalt zum Nettopreis der Versandkosten<br /></h3><p></p><p>{% set shippingNet = 100 %}<br /><br />{% if context.taxState == 'gross' and matchingTaxRules and matchingTaxRules.highestRate() %}<br />    {% set shippingNet = shippingNet / 100 * matchingTaxRules.highestRate().getPercentage() %}<br />    {% set shipping = shippingNet * (1 + (matchingTaxRules.highestRate().getTaxRate() / 100)) %}<br />{% else %}<br />    {% set shipping = shippingNet %}<br />{% endif %}<br /><br />{{ shipping }}<br /></p><p><br /></p><p>---<br /></p><p><br /></p><p>Folgende Variablen sind aktuell verfügbar - wenn sie weiter Variablen benötigen, dann bitte eine Supportanfrage über den Shopware Account an uns stellen.\n\n\n\n\n\n</p><br /><h2>Auflistung der möglichen Variablen</h2><h3>matchingTaxRules<i> (Steuern, die für die Versandart relevant sind, ermittelt über Steuer-Typ - PHP-Klasse <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php\" target=\"_blank\" rel=\"noreferrer noopener\">TaxRuleCollection</a>)</i></h3><ul><li>matchingTaxRules.highestRate().getTaxRate()</li></ul><h2>currency </h2><ul><li>currency.isoCode</li><li>currency.factor</li><li>currency.symbol</li><li>currency.shortName</li><li>currency.name</li><li>currency.position</li><li>currency.translations</li><li>currency.orders</li><li>currency.salesChannels</li><li>currency.salesChannelDefaultAssignments</li><li>currency.salesChannelDomains</li><li>currency.shippingMethodPrices</li><li>currency.promotionDiscountPrices</li><li>currency.isSystemDefault</li><li>currency.productExports</li><li>currency.countryRoundings</li><li>currency.itemRounding</li><li>currency.totalRounding</li><li>currency.taxFreeFrom <br /></li><li>currency.translated.customFields<br /></li></ul><h2>context</h2><ul><li>context.languageIdChain</li><li>context.versionId</li><li>context.currencyId</li><li>context.currencyFactor</li><li>context.scope</li><li>context.ruleIds</li><li>context.source</li><li>context.considerInheritance</li><li>context.taxState</li><li>context.rounding <br /></li></ul><h2>ruleIds - array with active rule ids </h2><h2>customer </h2><ul><li>customer.groupId</li><li>customer.defaultPaymentMethodId</li><li>customer.salesChannelId</li><li>customer.languageId</li><li>customer.lastPaymentMethodId</li><li>customer.defaultBillingAddressId</li><li>customer.defaultShippingAddressId</li><li>customer.customerNumber</li><li>customer.salutationId</li><li>customer.firstName</li><li>customer.lastName</li><li>customer.company</li><li>customer.password</li><li>customer.email</li><li>customer.title</li><li>customer.vatIds</li><li>customer.affiliateCode</li><li>customer.campaignCode</li><li>customer.active</li><li>customer.doubleOptInRegistration</li><li>customer.doubleOptInEmailSentDate</li><li>customer.doubleOptInConfirmDate</li><li>customer.hash</li><li>customer.guest</li><li>customer.firstLogin</li><li>customer.lastLogin</li><li>customer.newsletter</li><li>customer.birthday</li><li>customer.lastOrderDate</li><li>customer.orderCount</li><li>customer.orderTotalAmount</li><li>customer.createdAt</li><li>customer.updatedAt</li><li>customer.legacyEncoder</li><li>customer.legacyPassword</li><li>customer.group</li><li>customer.defaultPaymentMethod</li><li>customer.salesChannel</li><li>customer.language</li><li>customer.lastPaymentMethod</li><li>customer.salutation</li><li>customer.defaultBillingAddress</li><li>customer.defaultShippingAddress</li><li>customer.activeBillingAddress</li><li>customer.activeShippingAddress</li><li>customer.addresses</li><li>customer.orderCustomers</li><li>customer.autoIncrement</li><li>customer.tags</li><li>customer.tagIds</li><li>customer.promotions</li><li>customer.recoveryCustomer</li><li>customer.productReviews</li><li>customer.remoteAddress</li><li>customer.requestedGroupId</li><li>customer.requestedGroup</li><li>customer.boundSalesChannelId</li><li>customer.boundSalesChannel</li><li>customer.wishlists <br /></li><li>customer.customFields<br /></li></ul><h2>cart</h2><ul><li>cart.name</li><li>cart.token</li><li>cart.price.netPrice</li><li>cart.price.totalPrice</li><li>cart.price.calculatedTaxes</li><li>cart.price.taxRules</li><li>cart.price.positionPrice</li><li>cart.price.taxStatus</li><li>cart.price.rawTotal<br /></li><li>cart.lineItems</li><li>cart.errors</li><li>cart.deliveries</li><li>cart.transactions</li><li>cart.modified</li><li>cart.customerComment</li><li>cart.affiliateCode</li><li>cart.campaignCode</li><li>cart.data</li><li>cart.ruleIds <br /></li></ul><h2>lineItems - array with line item </h2><h2>lineItem</h2><ul><li>lineItem.id</li><li>lineItem.referencedId</li><li>lineItem.label</li><li>lineItem.quantity</li><li>lineItem.type</li><li>lineItem.priceDefinition</li><li>lineItem.price</li><li>lineItem.good</li><li>lineItem.description</li><li>lineItem.cover</li><li>lineItem.deliveryInformation</li><li>lineItem.children</li><li>lineItem.requirement</li><li>lineItem.removable</li><li>lineItem.stackable</li><li>lineItem.quantityInformation</li><li>lineItem.modified</li><li>lineItem.dataTimestamp</li><li>lineItem.dataContextHash</li><li><b>lineItem.payload</b></li><li>lineItem.payload.isCloseout</li><li>lineItem.payload.customFields</li><li>lineItem.payload.createdAt</li><li>lineItem.payload.releaseDate</li><li>lineItem.payload.isNew</li><li>lineItem.payload.markAsTopseller</li><li>lineItem.payload.purchasePrices</li><li>lineItem.payload.productNumber</li><li>lineItem.payload.manufacturerId</li><li>lineItem.payload.taxId</li><li>lineItem.payload.tagIds</li><li>lineItem.payload.categoryIds</li><li>lineItem.payload.propertyIds</li><li>lineItem.payload.optionIds</li><li>lineItem.payload.options</li><li>lineItem.payload.length</li><li>lineItem.payload.height</li><li>lineItem.payload.width</li><li>lineItem.payload.deliveryTime</li><li>lineItem.payload.features</li><li>lineItem.deliveryInformation.weight <br /></li></ul><h2>salesChannel</h2><ul><li>salesChannel.typeId</li><li>salesChannel.languageId</li><li>salesChannel.currencyId</li><li>salesChannel.paymentMethodId</li><li>salesChannel.shippingMethodId</li><li>salesChannel.countryId</li><li>salesChannel.navigationCategoryId</li><li>salesChannel.navigationCategoryDepth</li><li>salesChannel.homeSlotConfig</li><li>salesChannel.homeCmsPageId</li><li>salesChannel.homeCmsPage</li><li>salesChannel.homeEnabled</li><li>salesChannel.homeName</li><li>salesChannel.homeMetaTitle</li><li>salesChannel.homeMetaDescription</li><li>salesChannel.homeKeywords</li><li>salesChannel.footerCategoryId</li><li>salesChannel.serviceCategoryId</li><li>salesChannel.name</li><li>salesChannel.shortName</li><li>salesChannel.accessKey</li><li>salesChannel.currencies</li><li>salesChannel.languages</li><li>salesChannel.configuration</li><li>salesChannel.active</li><li>salesChannel.maintenance</li><li>salesChannel.maintenanceIpWhitelist</li><li>salesChannel.taxCalculationType</li><li>salesChannel.type</li><li>salesChannel.currency</li><li>salesChannel.language</li><li>salesChannel.paymentMethod</li><li>salesChannel.shippingMethod</li><li>salesChannel.country</li><li>salesChannel.orders</li><li>salesChannel.customers</li><li>salesChannel.countries</li><li>salesChannel.paymentMethods</li><li>salesChannel.shippingMethods</li><li>salesChannel.translations</li><li>salesChannel.domains</li><li>salesChannel.systemConfigs</li><li>salesChannel.navigationCategory</li><li>salesChannel.footerCategory</li><li>salesChannel.serviceCategory</li><li>salesChannel.productVisibilities</li><li>salesChannel.mailHeaderFooterId</li><li>salesChannel.numberRangeSalesChannels</li><li>salesChannel.mailHeaderFooter</li><li>salesChannel.customerGroupId</li><li>salesChannel.customerGroup</li><li>salesChannel.newsletterRecipients</li><li>salesChannel.promotionSalesChannels</li><li>salesChannel.documentBaseConfigSalesChannels</li><li>salesChannel.productReviews</li><li>salesChannel.seoUrls</li><li>salesChannel.seoUrlTemplates</li><li>salesChannel.mainCategories</li><li>salesChannel.paymentMethodIds</li><li>salesChannel.productExports</li><li>salesChannel.hreflangActive</li><li>salesChannel.hreflangDefaultDomainId</li><li>salesChannel.hreflangDefaultDomain</li><li>salesChannel.analyticsId</li><li>salesChannel.analytics</li><li>salesChannel.customerGroupsRegistrations</li><li>salesChannel.eventActions</li><li>salesChannel.boundCustomers</li><li>salesChannel.wishlists</li><li>salesChannel.landingPages <br /></li><li>salesChannel.translated.customFields<br /></li></ul><h2>shippingMethod</h2><ul><li>shippingMethod.translated.name</li><li>shippingMethod.active</li><li>shippingMethod.description</li><li>shippingMethod.trackingUrl</li><li>shippingMethod.deliveryTimeId</li><li>shippingMethod.deliveryTime</li><li>shippingMethod.translations</li><li>shippingMethod.orderDeliveries</li><li>shippingMethod.salesChannelDefaultAssignments</li><li>shippingMethod.salesChannels</li><li>shippingMethod.availabilityRule</li><li>shippingMethod.availabilityRuleId</li><li>shippingMethod.prices</li><li>shippingMethod.mediaId</li><li>shippingMethod.taxId</li><li>shippingMethod.media</li><li>shippingMethod.tags</li><li>shippingMethod.taxType</li><li>shippingMethod.tax <br /></li><li>shippingMethod.translated.customFields</li></ul><h2>paymentMethod</h2><ul><li>paymentMethod.pluginId</li><li>paymentMethod.handlerIdentifier</li><li>paymentMethod.translated.name</li><li>paymentMethod.distinguishableName</li><li>paymentMethod.description</li><li>paymentMethod.position</li><li>paymentMethod.active</li><li>paymentMethod.afterOrderEnabled</li><li>paymentMethod.plugin</li><li>paymentMethod.translations</li><li>paymentMethod.orderTransactions</li><li>paymentMethod.customers</li><li>paymentMethod.salesChannelDefaultAssignments</li><li>paymentMethod.salesChannels</li><li>paymentMethod.availabilityRule</li><li>paymentMethod.availabilityRuleId</li><li>paymentMethod.mediaId</li><li>paymentMethod.media</li><li>paymentMethod.formattedHandlerIdentifier</li><li>paymentMethod.shortName</li><li>paymentMethod.appPaymentMethod <br /></li><li>paymentMethod.translated.customFields</li></ul><h2>customerGroup</h2><ul><li>customerGroup.name</li><li>customerGroup.translated.name</li><li>customerGroup.displayGross</li><li>customerGroup.translations</li><li>customerGroup.customers</li><li>customerGroup.salesChannels</li><li>customerGroup.registrationActive</li><li>customerGroup.registrationTitle</li><li>customerGroup.registrationIntroduction</li><li>customerGroup.registrationOnlyCompanyRegistration</li><li>customerGroup.registrationSeoMetaDescription</li><li>customerGroup.registrationSalesChannels</li><li>customerGroup.translated.customFields</li></ul><h3>taxRules<i> (Auflistung der im Shop verfügbaren Steuern - PHP-Klasse <a href=\"https://github.com/shopware/platform/blob/trunk/src/Core/System/Tax/TaxCollection.php\" target=\"_blank\" rel=\"noreferrer noopener\">TaxCollection</a>)<br /></i></h3><ul><li>taxRules.ids</li><li>taxRules.elements</li></ul><br /><h4>\n\n\nErweiterung ab Pluginversion 2.2.0 - Ermittlung des Steuersatzes<br /></h4>Der für die Versandart relevante Steuersatz wird in Shopware über den \"Steuer-Typ\" (Auto, Höchster Satz oder Fester Satz) ermittelt. Das Ergebnis daraus speichern wir ab sofort in der Variablen \"matchingTaxRules\", diese entspricht der PHP-Klasse https://github.com/shopware/platform/blob/trunk/src/Core/Checkout/Cart/Tax/Struct/TaxRuleCollection.php.\nSie können somit den aktuell höchsten Steuersatz im Warenkorb über die folgende Twig-Variable auslesen: <br />{{ matchingTaxRules.highestRate().getTaxRate() }} Mit diesem Steuersatz können Sie nun rechnen.","installationManual":"<p>\nDie Installation des Plugins geht sehr schnell und ist unkompliziert.</p><ul><li>Plugin Manager über Einstellungen &gt; System &gt; Plugins aufrufen</li><li>Das Plugin hochladen, installieren und aktivieren</li><li>Keine weiter Konfiguration des Plugins erforderlich </li></ul>","version":"3.0.1","changelog":[{"version":"3.0.1","text":"<p>Improves plugin compatibility.</p>","creationDate":{"date":"2023-07-05 08:07:23.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"3.0.0","text":"<p>Compatibility established with Shopware 6.5.0.0</p>","creationDate":{"date":"2023-03-08 14:39:39.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.3.3","text":"<p>Optimizes shipping calculation on cart recalculation.</p>","creationDate":{"date":"2022-09-27 07:40:46.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.3.2","text":"<p>Fixes a problem where calculated shipping costs result in a value of 0.</p>","creationDate":{"date":"2022-08-04 12:42:53.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.3.1","text":"<p>Fixes a problem where the shop is not accessible after a change of the shipping costs template on the first call.</p>","creationDate":{"date":"2022-06-23 06:55:00.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.3.0","text":"<p>From now on it is possible to use own Twig functions from other plugins in the shipping costs calculation.</p>","creationDate":{"date":"2022-06-08 07:37:57.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.2.2","text":"<ul><li>Optimizes plugin image.</li><li>Improves compatibility with Shopware &gt;= 6.4.10.0.</li></ul>","creationDate":{"date":"2022-04-25 13:12:44.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.2.1","text":"<p>Optimizes delivery calculator on manually calculation.</p>","creationDate":{"date":"2022-03-07 11:03:30.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.2.0","text":"<p>Determines the tax rates relevant to the delivery and adds them as a possible variable in Twig.</p>","creationDate":{"date":"2021-12-29 10:41:52.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.1.0","text":"<p>Adds new variables to the shipping calculation.</p>","creationDate":{"date":"2021-11-29 08:05:50.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.0.2","text":"<p>Adds cart variable suggestion in the shipping calculation template.</p>","creationDate":{"date":"2021-09-01 13:21:25.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.0.1","text":"<p>Added cart to the shipping calculation template.</p>","creationDate":{"date":"2021-09-01 12:06:58.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"2.0.0","text":"<p>Improved compatibility with Shopware 6.4*.</p>","creationDate":{"date":"2021-05-18 07:49:06.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"1.0.4","text":"<p>Improves compatibility with Shopware version &gt; 6.3.0.0 and &lt;= 6.3.3.1.</p>","creationDate":{"date":"2022-10-05 18:20:02.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"1.0.3","text":"<p>Added validation on shipping calculation.</p>","creationDate":{"date":"2021-03-15 14:43:33.000000","timezone_type":3,"timezone":"Europe/Berlin"}},{"version":"1.0.2","text":"<p>Optimize shipping calculation.</p>","creationDate":{"date":"2021-02-15 13:12:01.000000","timezone_type":3,"timezone":"Europe/Berlin"}}],"link":"http://store.shopware.com:80/en/search?sSearch=acris76074869522","redirectToStore":false,"lowestPriceValue":59.9}